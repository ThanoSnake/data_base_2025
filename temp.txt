


🔹 Trigger: check_stage_capacity
Περιγραφή:
Το trigger check_stage_capacity ενεργοποιείται πριν από κάθε εισαγωγή εισιτηρίου στον πίνακα ticket και εξασφαλίζει ότι η διαδικασία αγοράς σέβεται μια σειρά από κρίσιμους περιορισμούς. Αρχικά ελέγχει αν η αγορά γίνεται μετά τη λήξη του event και, αν ναι, την απορρίπτει. Στη συνέχεια, ελέγχει την ενεργή κατάσταση του εισιτηρίου και αποτρέπει τη δημιουργία ανενεργού εισιτηρίου πριν από την έναρξη του event. Επιπλέον, συγκρίνει τον αριθμό εισιτηρίων που έχουν ήδη εκδοθεί για το συγκεκριμένο event με τη μέγιστη χωρητικότητα της σκηνής και εμποδίζει την υπέρβασή της. Τέλος, για τις VIP κατηγορίες εισιτηρίων, διασφαλίζει ότι δεν ξεπερνούν το 10% της συνολικής χωρητικότητας της σκηνής, εφαρμόζοντας σχετικό όριο. Σε κάθε παραβίαση των παραπάνω κανόνων, το trigger παράγει κατανοητά μηνύματα σφάλματος, διατηρώντας έτσι την αξιοπιστία και την ομαλή λειτουργία του συστήματος πωλήσεων.
