

Η αποθηκευμένη διαδικασία MatchBuyer εκτελείται μετά την εισαγωγή ενός αγοραστή στον πίνακα buyer_interest_queue και ελέγχει αν υπάρχει διαθέσιμος πωλητής στον πίνακα resale_queue. Αν ο αγοραστής έχει δηλώσει συγκεκριμένο ticket_id, τότε γίνεται αναζήτηση για αυτό το εισιτήριο. Διαφορετικά, αναζητείται εισιτήριο που αντιστοιχεί στο ίδιο event_id και category. Αν βρεθεί αντιστοιχία, δημιουργείται εγγραφή στον πίνακα visitor εφόσον δεν υπάρχει ήδη, ενημερώνεται ο κάτοχος του εισιτηρίου και σημειώνονται ως ολοκληρωμένες οι αντίστοιχες εγγραφές στους πίνακες resale_queue και buyer_interest_queue.
  
