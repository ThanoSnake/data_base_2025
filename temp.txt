
🔹 Trigger: new_resale_queue
Περιγραφή:
Το trigger new_resale_queue ενεργοποιείται πριν από κάθε εισαγωγή στη λίστα μεταπώλησης (resale_queue) και εφαρμόζει αυστηρούς ελέγχους για την εγκυρότητα της συναλλαγής. Αρχικά, διασφαλίζει ότι ο επισκέπτης που προσπαθεί να πουλήσει το εισιτήριο είναι ο πραγματικός κάτοχός του. Στη συνέχεια, ελέγχει εάν έχει καλυφθεί η μέγιστη χωρητικότητα της σκηνής για να είναι επιτρεπτή η μεταπώληση — δηλαδή, η μεταπώληση επιτρέπεται μόνο όταν το event είναι sold out. Επίσης, το trigger αποτρέπει την είσοδο εισιτηρίων στη λίστα μεταπώλησης αν το event έχει ήδη λήξει ή αν η ώρα αιτήματος για μεταπώληση προηγείται της πιο πρόσφατης ώρας αγοράς εισιτηρίου. Τέλος, ελέγχει εάν το εισιτήριο είναι ακόμα ενεργό, απορρίπτοντας την καταχώριση αν πρόκειται για ήδη χρησιμοποιημένο εισιτήριο. Με αυτόν τον τρόπο, το trigger προστατεύει την αξιοπιστία της διαδικασίας μεταπώλησης, εξασφαλίζοντας ότι γίνεται μόνο από νόμιμους κατόχους, σε κατάλληλες συνθήκες και εντός των σωστών χρονικών πλαισίων.
