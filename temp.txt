


🔹 Procedure: my_insert_resaler
Περιγραφή:
Η αποθηκευμένη διαδικασία my_insert_resaler χρησιμοποιείται για την εισαγωγή ενός εισιτηρίου προς μεταπώληση στον πίνακα resale_queue, καθώς και για την αυτόματη προσπάθεια αντιστοίχισής του με κάποιον διαθέσιμο αγοραστή. Δέχεται ως παραμέτρους το ticket_id, το visitor_id του πωλητή και την ημερομηνία/ώρα του αιτήματος (request_time). Αρχικά, καταχωρεί τα δεδομένα στον πίνακα resale_queue και στη συνέχεια, μέσω της εντολής SELECT LAST_INSERT_ID(), αποθηκεύει το αναγνωριστικό της νέας εγγραφής. Αμέσως μετά καλεί τη διαδικασία MatchResaler, η οποία ελέγχει αν υπάρχει κάποιος αγοραστής σε εκκρεμότητα που να ταιριάζει με το εισιτήριο, ώστε να προχωρήσει άμεσα η μεταπώληση. Έτσι, η my_insert_resaler λειτουργεί ως "entry point" για τη μεταπώληση, συνδυάζοντας την καταχώριση στην ουρά και τη δυναμική αντιστοίχιση σε μία ενιαία διαδικασία.
